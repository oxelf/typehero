import{GameState}from"./state.js";import{initDropdown}from"./dropdown.js";import{initOptions}from"./options.js";import{applyTheme}from"./theme.js";import{showSelect}from"./select.js";console.log("loaded");let capsLock=!1,themeOptions=["rose_pine","rose_pine_dawn","8008","retro_light","carbon"],preventInput=!1;async function run(){applyTheme();let e=new GameState;e.loadPreferences(),await e.newWords(),e.renderWords(),window.addEventListener("keydown",function(t){switch(t.key){case"Shift":return;case"CapsLock":return;case"Meta":return;case"Alt":return;case"Control":return;case"Tab":return}if(t.getModifierState("CapsLock")?(capsLock=!0,document.getElementById("caps-lock").style.display="flex"):(capsLock=!1,document.getElementById("caps-lock").style.display="none"),preventInput)return;e.input(t)}),document.querySelector(".dropdown-value").innerText=e.language,initDropdown(document.getElementById("language-dropdown"),async function(t){e.language=t,localStorage.setItem("typing-language",t),await e.newWords(),e.renderWords()},!1),initOptions(e);let t=document.getElementById("theme-button");t.onclick=function(){preventInput=!0;let e=localStorage.getItem("theme")||"rose_pine";showSelect(themeOptions,e,function(e){preventInput=!1,console.log("selected theme: ",e),localStorage.setItem("theme",e),applyTheme()}),function(){preventInput=!1}}}run()