export function drawGraph(h){let n=document.getElementById("wpm-chart");const k=getComputedStyle(n);n.width=parseInt(k.width),n.height=n.width*(9/16);let w=30,i=40,r=n.height-w,d=n.width-i,e=n.getContext("2d"),p=Math.floor(Math.max(...h.wpmTimeSeries.map(t=>t))/1e3),m=[];for(let t=0;t<p;t++){let o=0;for(let l=0;l<h.wpmTimeSeries.length;l++)h.wpmTimeSeries[l]<=t*1e3&&o++;t==0?m.push(0):m.push(60/(t/o))}let g=Math.max(...m),T=r/g,s=d/m.length,c=m.length>10?10:m.length,S=getComputedStyle(document.documentElement).getPropertyValue("--main-color").trim(),f=getComputedStyle(document.documentElement).getPropertyValue("--correct-font-color").trim();e.strokeStyle=f,e.beginPath(),e.moveTo(i,0),e.lineTo(i,r),e.lineTo(d+i,r),e.stroke(),e.fillStyle=f,e.font="12px Arial";let u=5;for(let t=0;t<=u;t++){let o=g/u*t,l=r-o*T;e.fillText(Math.round(o),5,l),e.beginPath(),e.moveTo(i-5,l),e.lineTo(i,l),e.stroke()}for(let t=1;t<c;t++){let o=p/c*t,l=i+o*s;e.fillText(Math.round(o),l-10,r+20),e.beginPath(),e.moveTo(l,r),e.lineTo(l,r+5),e.stroke()}let x=i,y=r;for(let t=1;t<m.length;t++){let o=i+t*s,l=r-m[t]*T;e.beginPath(),e.moveTo(x,y),e.lineTo(o,l),e.strokeStyle=S,e.stroke(),x=o,y=l}for(let t=0;t<h.mistakes.length;t++){let o=h.mistakes[t],l=i+o/1e3*s,a=r*.75;e.fillStyle="red",e.strokeStyle="red",e.beginPath(),e.moveTo(l-3,a-3),e.lineTo(l+3,a+3),e.moveTo(l-3,a+3),e.lineTo(l+3,a-3),e.strokeWidth=5,e.stroke()}}
