import{GameState as u}from"./js/state.js";import{initOptions as d}from"./js/options.js";import{applyTheme as s}from"./js/theme.js";import{showSelect as r}from"./js/select.js";import{getId as m}from"./js/auth.js";import{numberSpinner as g}from"./js/text_animations.js";console.log("loaded"),s();let f=["rose_pine","rose_pine_dawn","8008","retro_light","carbon","forest"],p=["english","german"],n=!1,c=!1;async function y(){g(document.getElementById("title"));let a=m();console.log("user id: ",a);let e=new u;e.loadPreferences(),await e.newWords(),e.renderWords(),window.addEventListener("keydown",function(t){switch(t.key){case"Shift":return;case"CapsLock":return;case"Meta":return;case"Alt":return;case"Control":return;case"Tab":return}t.getModifierState("CapsLock")?(c=!0,document.getElementById("caps-lock").style.display="flex"):(c=!1,document.getElementById("caps-lock").style.display="none"),!n&&e.input(t)}),d(e);let l=document.querySelector(".dropdown-value");l.innerText=e.language,l.onclick=function(){n=!0;let t=localStorage.getItem("typing-language")||"english";r(p,t,async function(o){n=!1,console.log("selected language: ",o),localStorage.setItem("typing-language",o),e.language=o,l.innerText=e.language,e.reset(),await e.newWords(),e.renderWords()},function(){n=!1})};let i=document.getElementById("theme-button");i.onclick=function(){n=!0;let t=localStorage.getItem("theme")||"rose_pine";r(f,t,function(o){n=!1,console.log("selected theme: ",o),localStorage.setItem("theme",o),s()},function(){n=!1})},h(),fetch("https://typehero.oxelf.dev/view")}async function h(){let e=await(await fetch("https://typehero.oxelf.dev/stats")).json();document.getElementById("view-count").innerText=e.siteViews,document.getElementById("tests-count").innerText=e.testsStarted}y();
