import{GameState as u}from"./js/state.js";import{applyTheme as l}from"./js/theme.js";import{showSelect as c}from"./js/select.js";import{getId as g}from"./js/auth.js";console.log("loaded"),l();let m=["rose_pine","rose_pine_dawn","8008","retro_light","carbon","forest"],p=["english","german"],o=!1,d=!1;async function f(){let r=g();console.log("user id: ",r);let e=new u;e.loadPreferences(),await e.newWords(),e.renderWords(),window.addEventListener("keydown",function(t){switch(t.key){case"Shift":return;case"CapsLock":return;case"Meta":return;case"Alt":return;case"Control":return;case"Tab":return}t.getModifierState("CapsLock")?(d=!0,document.getElementById("caps-lock").style.display="flex"):(d=!1,document.getElementById("caps-lock").style.display="none"),!o&&e.input(t)});let s=document.querySelector("toggle-group");s.onchange=async function(t){t.value=="Words"?(e.mode="words",localStorage.setItem("typing-mode","words"),e.reset(),e.wordAmount=parseInt(s.secondValue),await e.newWords(),e.renderWords()):t.value=="Quote"?(e.mode="quote",localStorage.setItem("typing-mode","quote"),e.reset(),await e.newWords(),e.renderWords()):(e.wordAmount=parseInt(t.value),localStorage.setItem("typing-words",t.value),e.reset(),await e.newWords(),e.renderWords())};let a=document.querySelector(".dropdown-value");a.innerText=e.language,a.onclick=function(){o=!0;let t=localStorage.getItem("typing-language")||"english";c(p,t,async function(n){o=!1,console.log("selected language: ",n),localStorage.setItem("typing-language",n),e.language=n,a.innerText=e.language,e.reset(),await e.newWords(),e.renderWords()},function(){o=!1})};let i=document.getElementById("theme-button");i.onclick=function(){o=!0;let t=localStorage.getItem("theme")||"rose_pine";c(m,t,function(n){o=!1,console.log("selected theme: ",n),localStorage.setItem("theme",n),l()},function(){o=!1})},w(),fetch("https://typehero.oxelf.dev/view")}async function w(){let e=await(await fetch("https://typehero.oxelf.dev/stats")).json();document.getElementById("view-count").innerText=e.siteViews,document.getElementById("tests-count").innerText=e.testsStarted}f();
